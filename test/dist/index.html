<!DOCTYPE html>
<html lang="en">
<style>
    #slider5a .slider-track-high,
    #slider5b .slider-track-high {
        background: green;
    }

    #slider5a .slider-track-low,
    #slider5b .slider-track-low {
        background: red;
    }

    #slider5a .slider-selection,
    #slider5b .slider-selection {
        background: yellow;
    }




    #snackbar {
        visibility: hidden;
        /* Hidden by default. Visible on click */
        min-width: 250px;
        /* Set a default minimum width */
        margin-left: -125px;
        /* Divide value of min-width by 2 */
        background-color: #333;
        /* Black background color */
        color: #fff;
        /* White text color */
        text-align: center;
        /* Centered text */
        border-radius: 2px;
        /* Rounded borders */
        padding: 16px;
        /* 16px Padding */
        position: fixed;
        /* Sit on top of the screen */
        z-index: 1;
        /* Add a z-index if needed */
        left: 48%;
        /* 35% Center the snackbar */
        bottom: 35%;
        /* 30px from the bottom */
    }

    /* Show the snackbar when clicking on a button (class added with JavaScript) */
    #snackbar.show {
        visibility: visible;
        /* Show the snackbar */
        /* Add animation: Take 0.5 seconds to fade in and out the snackbar. 
                However, delay the fade out process for 2.5 seconds */
        -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
        animation: fadein 0.5s, fadeout 0.5s 2.5s;
    }

    /* Animations to fade the snackbar in and out */
    @-webkit-keyframes fadein {
        from {
            bottom: 0;
            opacity: 0;
        }

        to {
            bottom: 35%;
            opacity: 1;
        }
    }

    @keyframes fadein {
        from {
            bottom: 0;
            opacity: 0;
        }

        to {
            bottom: 35%;
            opacity: 1;
        }
    }

    @-webkit-keyframes fadeout {
        from {
            bottom: 35%;
            opacity: 1;
        }

        to {
            bottom: 0;
            opacity: 0;
        }
    }

    @keyframes fadeout {
        from {
            bottom: 35%;
            opacity: 1;
        }

        to {
            bottom: 0;
            opacity: 0;
        }
    }

    #idTableReservoir2.dataTable td {
        font-size: 0.85em;
    }


    /* The Modal (background) */
    .modal {
        display: none;
        /* Hidden by default */
        position: fixed;
        /* Stay in place */
        z-index: 1;
        /* Sit on top */
        padding-top: 100px;
        /* Location of the box */
        left: 0;
        top: 0;
        width: 100%;
        /* Full width */
        height: 100%;
        /* Full height */
        overflow: auto;
        /* Enable scroll if needed */
        background-color: rgb(0, 0, 0);
        /* Fallback color */
        background-color: rgba(0, 0, 0, 0.9);
        /* Black w/ opacity */
    }

    /* Modal Content (image) */
    .modal-content {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 1024px;
    }

    /* Add Animation */
    .modal-content,
    #caption {
        -webkit-animation-name: zoom;
        -webkit-animation-duration: 0.6s;
        animation-name: zoom;
        animation-duration: 0.6s;
    }

    @-webkit-keyframes zoom {
        from {
            -webkit-transform: scale(0)
        }

        to {
            -webkit-transform: scale(1)
        }
    }

    @keyframes zoom {
        from {
            transform: scale(0)
        }

        to {
            transform: scale(1)
        }
    }

    /* The Close Button */
    .close {
        position: absolute;
        top: 15px;
        right: 35px;
        color: #f1f1f1;
        font-size: 40px;
        font-weight: bold;
        transition: 0.3s;
    }

    .close:hover,
    .close:focus {
        color: #bbb;
        text-decoration: none;
        cursor: pointer;
    }

    /* 100% Image Width on Smaller Screens */
    @media only screen and (max-width: 700px) {
        .modal-content {
            width: 100%;
        }
    }
</style>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <meta name="viewport" content="width=1024, initial-scale=1.0" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>수위 모니터링 시스템</title>
    <link href="css/styles.css" rel="stylesheet" />
    <link href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css" rel="stylesheet"
        crossorigin="anonymous" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/js/all.min.js"
        crossorigin="anonymous"></script>
</head>
<!-- 
    <body class="sb-nav-fixed">
        -->

<body class="bg-primary">

    <!-- login --------------------------------------------------------------------->
    <div id="idBeforeLogin" style="display:block;margin-top:10%;">
        <div id="layoutAuthentication_content">
            <main>
                <div class="container">
                    <div class="row justify-content-center">
                        <div class="col-lg-5">
                            <div class="card shadow-lg border-0 rounded-lg mt-5">
                                <div class="card-header">
                                    <h3 class="text-center font-weight-light my-4">수위모니터링 시스템</h3>
                                </div>
                                <div class="card-body">
                                    <form>
                                        <div class="form-group">
                                            <label class="small mb-1" for="inputEmailAddress">사용자명</label>
                                            <input class="form-control py-4" id="inputEmailAddress" type="email"
                                                placeholder="사용자명을 넣어세요" />
                                        </div>
                                        <div class="form-group">
                                            <label class="small mb-1" for="inputPassword">비밀번호</label>
                                            <input class="form-control py-4" id="inputPassword" type="password"
                                                placeholder="비밀번호를 넣어세요" />
                                        </div>
                                        <div class="form-group">
                                            <div class="custom-control custom-checkbox">
                                                <input class="custom-control-input" id="rememberPasswordCheck"
                                                    type="checkbox" checked />
                                                <label class="custom-control-label" for="rememberPasswordCheck">정보를
                                                    저장</label>
                                            </div>
                                        </div>
                                        <div
                                            class="form-group d-flex align-items-center justify-content-between mt-4 mb-0">
                                            <a class="small" href="password.html"></a>
                                            <a class="btn btn-primary" onclick="processLogin();">로그인</a>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>


    <!-- after login ------------------------------------------------------------------------------------->
    <div id="idAfterLogin" style="display:none">
        <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
            <a class="navbar-brand" onclick="moveToDashboard();">수위 모니터링 시스템</a>
            <!-- Side bar toggle -->
            <button class="btn btn-link btn-sm order-1 order-lg-0" id="sidebarToggle" href="#"
                onclick="isSidebarOpen();"><i class="fas fa-bars"></i></button>
            <!-- Navbar Search-->
            <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0"
                style="visibility: hidden;">
                <div class="input-group">
                    <input class="form-control" type="text" placeholder="Search for..." aria-label="Search"
                        aria-describedby="basic-addon2" />
                    <div class="input-group-append">
                        <button class="btn btn-primary" type="button"><i class="fas fa-search"></i></button>
                    </div>
                </div>
            </form>
            <!-- Navbar-->
            <ul class="navbar-nav ml-auto ml-md-0">
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" id="userDropdown" href="#" role="button" data-toggle="dropdown"
                        aria-haspopup="true" aria-expanded="false"><i class="fas fa-user fa-fw"></i></a>
                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" onclick="processLogout();">Logout</a>
                    </div>
                </li>
            </ul>
        </nav>
        <div id="layoutSidenav">
            <div id="layoutSidenav_nav">
                <nav class="sb-sidenav accordion sb-sidenav-dark" id="sidenavAccordion">
                    <div class="sb-sidenav-menu">
                        <div class="nav">
                            <div class="sb-sidenav-menu-heading">종합</div>
                            <a class="nav-link" onclick="moveToDashboard();">
                                <div class="sb-nav-link-icon"><i class="fas fa-tachometer-alt"></i></div>
                                대시보드
                            </a>
                            <div class="sb-sidenav-menu-heading">상세</div>
                            <a class="nav-link" onclick="moveToSensing();">
                                <div class="sb-nav-link-icon"><i class="fas fa-water"></i></div>
                                데이터
                            </a>
                            <a class="nav-link" onclick="moveToSensing2();">
                                <div class="sb-nav-link-icon"><i class="fas fa-water"></i></div>
                                데이터2
                            </a>
                            <a class="nav-link collapsed" href="#" data-toggle="collapse" data-target="#collapseEdit"
                                aria-expanded="false" aria-controls="collapseEdit">
                                <div class="sb-nav-link-icon"><i class="fas fa-edit"></i></div>
                                기초 정보
                                <div class="sb-sidenav-collapse-arrow"><i class="fas fa-angle-down"></i></div>
                            </a>
                            <div class="collapse" id="collapseEdit" aria-labelledby="headingOne"
                                data-parent="#sidenavAccordion">
                                <nav class="sb-sidenav-menu-nested nav">
                                    <a class="nav-link" onclick="moveToEdit();">저수지 정보</a>
                                    <a class="nav-link" onclick="moveToUser();">사용자 정보</a>
                                </nav>
                            </div>
                            <a class="nav-link" onclick="moveToSetting();">
                                <div class="sb-nav-link-icon"><i class="fas fa-cog"></i></div>
                                설정
                            </a>
                        </div>
                    </div>
                </nav>
            </div>
            <div id="layoutSidenav_content">
                <main>
                    <!-- Dashboard ---------------------------------------------------------------------->
                    <div id="idDashboard" class="container-fluid">
                        <h1 class="mt-4"></h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item active" id="dashboard-warning">주요 경보</li>
                        </ol>
                        <div class="row">
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-primary text-white mb-4">
                                    <!-- sample data here ... -->
                                    <div class="card-body">수위 경보</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" id="idWlevelWarning"
                                            onclick="clickWarning1();">0</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-warning text-white mb-4">
                                    <div class="card-body">수문 열림</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" id="idOpenWarning"
                                            onclick="clickWarning2();">0</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-success text-white mb-4">
                                    <div class="card-body">배터리 경보</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" id="idBatteryWarning"
                                            onclick="clickWarning3();">0</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-3 col-md-6">
                                <div class="card bg-danger text-white mb-4" data-toggle="modal" data-backdrop="false"
                                    data-target="#myModal5">
                                    <div class="card-body">액츄에이터 경보</div>
                                    <div class="card-footer d-flex align-items-center justify-content-between">
                                        <a class="small text-white stretched-link" id="idActuatorWarning"
                                            onclick="clickWarning4();">0</a>
                                        <div class="small text-white"><i class="fas fa-angle-right"></i></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div id="mapTableToggle" class="card-header">
                                        <i class="fas fa-water mr-1"></i>
                                        저수지 선택 (지도)
                                        <i class="fas fa-exchange-alt" style="float:right;"></i>
                                    </div>
                                    <div class="card-body">
                                        <div id="idMap" style="width:100%;height:800px;"></div>
                                        <div id="idTable" class="table-responsive" style="display:none">
                                            <table class="table table-bordered" style="text-align:center;"
                                                id="idTableReservoir" width="100%" cellspacing="0">
                                                <thead>
                                                    <tr>
                                                        <th>선택</th>
                                                        <th>번호</th>
                                                        <th>지점이름</th>
                                                        <th>관리번호</th>
                                                        <th>주소</th>
                                                    </tr>
                                                </thead>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-6">
                                <div class="card mb-4">
                                    <div id="detailChartToggle" class="card-header">
                                        <i class="fas fa-info-circle mr-1"></i>
                                        저수지 상세정보
                                        <i class="fas fa-exchange-alt" style="float:right;"></i>
                                    </div>

                                    <div class="card-body" style="height:840px;">
                                        <div id="idDetail">
                                            <div style="width:10%;margin-left:4%;">
                                                <div id="vpos3"
                                                    style="position:absolute;border-bottom:4px dotted blue;z-index:9000;">
                                                </div>
                                                <div id="vpos1"
                                                    style="position:absolute;border-top:4px dotted blue;z-index:9000;">
                                                </div>

                                            </div>
                                            <div style="width:15%;float:left;margin-left:10%;">
                                                <div id="wtank" style="margin-top:0px;margin-top:0px;"></div>
                                            </div>
                                            <div style="width:10%;margin-left:22%;">
                                                <div id="vpos2"
                                                    style="position:absolute;border-bottom:4px solid red;color:red;z-index:9000;">
                                                </div>
                                                <div id="vpos4"
                                                    style="position:absolute;border-top:4px solid red;z-index:9000;">
                                                </div>
                                            </div>
                                            <!-- 상세 표시내용을 좌로 더 이동 35%에서 28%로 조정 -->
                                            <div style="width:60%;margin-left:35%;margin-top:-50px;">
                                                <table class="table" style="transform:scale(0.85);">
                                                    <tbody id="reservoirDetailTable">

                                                    </tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <div id="idChart" style="display:none">
                                            <br>
                                            <div class="row" style="padding:10px;">
                                                <div class="col-xl-2">
                                                    <div class="custom-control custom-radio">
                                                        <input class="custom-control-input" name="dsetRadio2"
                                                            type="radio" id="idSenseType3" checked>
                                                        <label class="custom-control-label"
                                                            for="idSenseType3">실시간</label>
                                                    </div>
                                                </div>
                                                <div class="col-xl-2">
                                                    <div class="custom-control custom-radio">
                                                        <input class="custom-control-input" name="dsetRadio2"
                                                            type="radio" id="idSenseType4">
                                                        <label class="custom-control-label"
                                                            for="idSenseType4">날짜별</label>
                                                    </div>
                                                </div>
                                                <div class="col-xl-4">
                                                    <input id="idSenseDate" type="date"
                                                        class="col form-control form-control-sm"></input>
                                                </div>
                                                <div class="col-xl-2" style="float:right;">
                                                    <button class="btn btn-primary" type="button"
                                                        onclick="updateGraph();">업데이트</button>
                                                </div>
                                            </div>

                                            <br>
                                            <br>
                                            <br>
                                            <div class="text-center">
                                                <h3>수위 (EL.m)</h3>
                                            </div>
                                            <br>
                                            <br>
                                            <br>
                                            <div id="idChart-message">
                                                <canvas id="idChart-sub" width="100%"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sense data display ---------------------------------------------------------------------->
                    <div id="idSense" class="container-fluid" style="display:none">
                        <h1 class="mt-4">데이터</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a onclick="moveToDashboard();">대시보드</a></li>
                            <li class="breadcrumb-item active">데이터</li>
                        </ol>
                        <div class="card mb-4">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="card shadow mb-4 ">
                                        <div class="card-header py-3">
                                            <div class="row">
                                                <h6 class="col-lg-6 m-0 font-weight-bold text-primary">실시간 데이터</h6>
                                                <div class="col-lg-6">
                                                    <button class="float-right btn btn-primary mr-3" type="button"
                                                        onclick="specificSenseUpdate();">업데이트</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body ml-4 mr-4">
                                            <div class="row">
                                                <div class="col-lg-6 custom-control custom-radio">
                                                    <input class="custom-control-input" name="dsetRadio1" type="radio"
                                                        id="idSenseType1" checked>
                                                    <label class="custom-control-label" for="idSenseType1">전체
                                                        저수지</label>
                                                </div>
                                                <div class="col-lg-6 custom-control custom-radio">
                                                    <input class="custom-control-input" name="dsetRadio1" type="radio"
                                                        id="idSenseType2">
                                                    <label class="custom-control-label" for="idSenseType2">개별
                                                        저수지</label>
                                                </div>
                                            </div>
                                            <div class="row mt-4">
                                                <div class="col-lg-6">
                                                    저수지 선택
                                                </div>
                                                <div class="col-lg-6 bs-multiselect form-control">
                                                    <select id="idSenseMember" multiple="multiple" disabled></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="card shadow mb-4 ">
                                        <div class="card-header py-3">
                                            <div class="row">
                                                <h6 class="col-lg-6 m-0 font-weight-bold text-primary">과거 데이터</h6>
                                                <div class="col-lg-6">
                                                    <button class="float-right btn btn-primary mr-3" type="button"
                                                        onclick="downloadSenseUpdate();">다운로드</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body ml-4 mr-4">
                                            <div class="row">
                                                <div class="row col-lg-6">
                                                    시작일
                                                    <input id="idSenseDateStart" type="date"
                                                        class="ml-4 mr-2 col form-control form-control-sm"></input>
                                                </div>
                                                <div class="row col-lg-6 ml-4">
                                                    종료일
                                                    <input id="idSenseDateEnd" type="date"
                                                        class="ml-4 mr-2 col form-control form-control-sm"></input>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-lg-6">
                                                    저수지 선택
                                                </div>
                                                <div class="col-lg-6 bs-multiselect form-control">
                                                    <select id="idSenseMember2" multiple="multiple"></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered" style="text-align:center;font-size:0.8rem;"
                                        id="idTableSense" width="100%" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>번호</th>
                                                <th>현재시간</th>
                                                <th>관리번호</th>
                                                <th>지점이름</th>
                                                <th>계측값(kgf/cm2)</th>
                                                <th>수위(EL.m)</th>
                                                <th>저수량(㎥)</th>
                                                <th>저수율(%)</th>
                                                <th>제방높이(m)</th>
                                                <th>온도(&#176;C)</th>
                                                <th>전압(V)</th>
                                                <th>열림목표(%)</th>
                                                <th>열림현재(%)</th>
                                                <th>통신데이터</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Sense data2 display ---------------------------------------------------------------------->
                    <div id="idSense2" class="container-fluid" style="display:none">
                        <h1 class="mt-4">데이터2</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a onclick="moveToDashboard();">대시보드</a></li>
                            <li class="breadcrumb-item active">데이터2</li>
                        </ol>
                        <div class="card mb-4">
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="card shadow mb-4 ">
                                        <div class="card-header py-3">
                                            <div class="row">
                                                <h6 class="col-lg-6 m-0 font-weight-bold text-primary">실시간 데이터</h6>
                                                <div class="col-lg-6">
                                                    <button class="float-right btn btn-primary mr-3" type="button"
                                                        onclick="specificSenseUpdate();">업데이트</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body ml-4 mr-4">
                                            <div class="row">
                                                <div class="col-lg-6 custom-control custom-radio">
                                                    <input class="custom-control-input" name="dsetRadio1" type="radio"
                                                        id="idSense2Type1" checked>
                                                    <label class="custom-control-label" for="idSenseType1">전체
                                                        저수지</label>
                                                </div>
                                                <div class="col-lg-6 custom-control custom-radio">
                                                    <input class="custom-control-input" name="dsetRadio1" type="radio"
                                                        id="idSense2Type2">
                                                    <label class="custom-control-label" for="idSenseType2">개별
                                                        저수지</label>
                                                </div>
                                            </div>
                                            <div class="row mt-4">
                                                <div class="col-lg-6">
                                                    저수지 선택
                                                </div>
                                                <div class="col-lg-6 bs-multiselect form-control">
                                                    <select id="idSense2Member" multiple="multiple" disabled></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">
                                    <div class="card shadow mb-4 ">
                                        <div class="card-header py-3">
                                            <div class="row">
                                                <h6 class="col-lg-6 m-0 font-weight-bold text-primary">과거 데이터</h6>
                                                <div class="col-lg-6">
                                                    <button class="float-right btn btn-primary mr-3" type="button"
                                                        onclick="downloadSenseUpdate();">다운로드</button>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="card-body ml-4 mr-4">
                                            <div class="row">
                                                <div class="row col-lg-6">
                                                    시작일
                                                    <input id="idSense2DateStart" type="date"
                                                        class="ml-4 mr-2 col form-control form-control-sm"></input>
                                                </div>
                                                <div class="row col-lg-6 ml-4">
                                                    종료일
                                                    <input id="idSense2DateEnd" type="date"
                                                        class="ml-4 mr-2 col form-control form-control-sm"></input>
                                                </div>
                                            </div>
                                            <div class="row mt-3">
                                                <div class="col-lg-6">
                                                    저수지 선택
                                                </div>
                                                <div class="col-lg-6 bs-multiselect form-control">
                                                    <select id="idSense2Member2" multiple="multiple"></select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered" style="text-align:center;font-size:0.8rem;"
                                        id="idTableSense2" width="100%" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>번호</th>
                                                <th>id</th>
                                                <th>R_manageid</th>
                                                <th>R_sensetime</th>
                                                <th>levelStr300</th>
                                                <th>airHeightStr300</th>
                                                <th>temperature</th>
                                                <th>voltage</th>
                                                <th>velocityStr600</th>
                                                <th>levelStr600</th>
                                                <th>instaneousFlowStr600</th>
                                                <th>cumulativeFlowStr600</th>
                                                <th>fault</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Edit display ---------------------------------------------------------------------->
                    <div id="idReservoir" class="container-fluid" style="display:none">
                        <h1 class="mt-4">저수지 및 장비 정보추가</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a onclick="moveToDashboard();">대시보드</a></li>
                            <li class="breadcrumb-item active">저수지 및 장비 정보추가</li>
                        </ol>
                        <div class="card mb-4" style="padding:10px;">
                            <div style="float:right;" style="display:none">
                                <button type="button" class="btn btn-secondary" title="신규 저수지 추가"
                                    onclick="addBlankReservoir();">&nbsp;&nbsp;추가&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-primary" style="margin-left:10px;"
                                    title="기존 저수지 편집" onclick="editReservoir();">&nbsp;&nbsp;편집&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-danger" style="margin-left:10px;"
                                    title="선택된 저수지 삭제" onclick="delReservoir();">&nbsp;&nbsp;삭제&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-success" style="margin-left:10px;"
                                    title="추가/편집중인 저수지 정보 저장"
                                    onclick="saveReservoir();">&nbsp;&nbsp;저장&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-info" style="margin-left:10px;"
                                    title="추가/편집중인 저수지 정보 저장" onclick="refreshResevoirTable();">업데이트</button>
                                <!--
                                <button type="button" class="btn btn-secondary" title="테이블 항목 Click -> 수정 -> 추가버튼(기존 항목은 보존)" onclick="addReservoir();">추가</button>
                                <button type="button" class="btn btn-primary" title="테이블 항목 Click -> 삭제버튼" onclick="delReservoir();">삭제</button>
                                <button type="button" class="btn btn-success" title="테이블 항목 Click -> 수정 -> 저장버튼" onclick="editReservoir();">저장</button>
                                -->
                            </div>
                            <!-- 데이터 추가 -->
                            <div class="row" style="margin-top:15px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirName">지점이름</label>
                                    <input class="form-control py-3" id="inputReservoirName" type="text"
                                        style="ime-mode:active;margin-top:-15px;" placeholder="지점이름을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirManageid">관리번호</label>
                                    <input class="form-control py-3" id="inputReservoirManageid" type="text"
                                        style="ime-mode:active;margin-top:-15px;" placeholder="관리번호를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirAddress">주소</label>
                                    <input class="form-control py-3" id="inputReservoirAddress" type="text"
                                        style="ime-mode:active;margin-top:-15px;" title="눌러서 지도에서 입력"
                                        placeholder="주소를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirRsvtype">제어</label>
                                    <select id="inputReservoirRsvtype" class="form-control" style="margin-top:-15px;">
                                        <option value="0">수위 모니터링</option>
                                        <option value="1">수문 제어</option>
                                    </select>
                                </div>
                            </div>
                            <div class="row" style="margin-top:-5px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirLevelmin">사수위(m)</label>
                                    <input class="form-control py-3" id="inputReservoirLevelmin" type="text"
                                        style="margin-top:-15px;" placeholder="사수위를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirLevelfull">만수위(m)</label>
                                    <input class="form-control py-3" id="inputReservoirLevelfull" type="text"
                                        style="margin-top:-15px;" placeholder="만수위를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirLevelover">홍수위(m)</label>
                                    <input class="form-control py-3" id="inputReservoirLevelover" type="text"
                                        style="margin-top:-15px;" placeholder="홍수위를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirHeight">제방높이(m)</label>
                                    <input class="form-control py-3" id="inputReservoirHeight" type="text"
                                        style="margin-top:-15px;" placeholder="제방높이를 입력하세요" />
                                </div>
                            </div>
                            <div class="row" style="margin-top:-5px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirEffquan">유효저수량(㎥)</label>
                                    <input class="form-control py-3" id="inputReservoirEffquan" type="text"
                                        style="margin-top:-15px;" placeholder="유효저수량을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirPrange">센싱압력(Kgf/㎠)</label>
                                    <input class="form-control py-3" id="inputReservoirPrange" type="text"
                                        style="margin-top:-15px;" placeholder="센싱 압력 최대깂을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirSenseadd">센싱보정(Kgf/㎠)</label>
                                    <input class="form-control py-3" id="inputReservoirSenseadd" type="text"
                                        style="margin-top:-15px;" placeholder="센싱 보정값을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirLeveladd">수위보정(m)</label>
                                    <input class="form-control py-3" id="inputReservoirLeveladd" type="text"
                                        style="margin-top:-15px;" placeholder="수위 보정값을 입력하세요" />
                                </div>
                            </div>
                            <div class="row" style="margin-top:-5px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputReservoirIncharge">관할</label>
                                    <input class="form-control py-3" id="inputReservoirIncharge" type="text"
                                        style="ime-mode:active;margin-top:-15px;" placeholder="관할을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputDeviceMacid">장비MAC</label>
                                    <input class="form-control py-3" id="inputDeviceMacid" type="text"
                                        style="margin-top:-15px;" placeholder="장비MAC 번호 12자리를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputDevicePhone">전화번호</label>
                                    <input class="form-control py-3" id="inputDevicePhone" type="text"
                                        style="margin-top:-15px;" placeholder="전화번호를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputDeviceComminterval">통신주기</label>
                                    <input class="form-control py-3" id="inputDeviceComminterval" type="text"
                                        style="margin-top:-15px;" placeholder="1분 단위로 입력하세요" />
                                </div>
                            </div>
                            <!-- 2023-0523 -->
                            <div class="row" style="margin-top:-5px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputDeviceWaittime">경보대기</label>
                                    <input class="form-control py-3" id="inputDeviceWaittime" type="text"
                                        style="margin-top:-15px;" placeholder="Actuator 경보 대기시간(초단위)을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputDeviceKeeptime">경보유지</label>
                                    <input class="form-control py-3" id="inputDeviceKeeptime" type="text"
                                        style="margin-top:-15px;" placeholder="Actuator 경보 유지시간(초단위)을 입력하세요" />
                                </div>
                            </div>
                            <div class="card-body" style="margin-top:-10px;">
                                <div class="table-responsive">
                                    <table class="table table-bordered" style="text-align:center;font-size:0.8rem;"
                                        id="idTableReservoir2" width="auto" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>선택</th>
                                                <th>번호</th>
                                                <th>지점</th>
                                                <th>관리번호</th>
                                                <th>주소</th>
                                                <th>제어</th>
                                                <th>사수위(m)</th>
                                                <th>만수위(m)</th>
                                                <th>홍수위(m)</th>
                                                <th>제방높이(m)</th>
                                                <th>유효저수량(㎥)</th>
                                                <th>센싱압력</th>
                                                <th>센싱보정</th>
                                                <th>수위보정</th>
                                                <th>관할</th>
                                                <th>장비MAC</th>
                                                <th>전화번호</th>
                                                <th>통신주기</th>
                                                <th>통신시간</th>
                                                <th>경보대기</th>
                                                <th>등록일</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>



                    <!-- User data display ---------------------------------------------------------------------->
                    <div id="idUser" class="container-fluid" style="display:none">
                        <h1 class="mt-4">사용자 추가</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a onclick="moveToDashboard();">대시보드</a></li>
                            <li class="breadcrumb-item active">사용자 추가</li>
                        </ol>
                        <div class="card mb-4" style="padding:10px;">
                            <div style="float:right;" style="display:none">
                                <button type="button" class="btn btn-secondary" title="신규 사용자 추가"
                                    onclick="addBlankUser();">&nbsp;&nbsp;추가&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-primary" style="margin-left:10px;"
                                    title="사용자 정보 수정" onclick="editUser();">&nbsp;&nbsp;편집&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-danger" style="margin-left:10px;"
                                    title="선택된 사용자 삭제" onclick="delUser();">&nbsp;&nbsp;삭제&nbsp;&nbsp;</button>
                                <button type="button" class="btn btn-success" style="margin-left:10px;"
                                    title="추가/편집중인 사용자 정보 저장" onclick="saveUser();">&nbsp;&nbsp;저장&nbsp;&nbsp;</button>
                            </div>
                            <!-- 데이터 추가 -->
                            <div class="row" style="margin-top:20px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputKrname">이름</label>
                                    <input class="form-control py-3" id="inputKrname" type="text"
                                        style="ime-mode:active;" placeholder="이름을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputCompany">회사</label>
                                    <input class="form-control py-3" id="inputCompany" type="text"
                                        style="ime-mode:active;" placeholder="회사명을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputPhone">전화번호</label>
                                    <input class="form-control py-3" id="inputPhone" type="text"
                                        placeholder="전화번호를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputAddress">주소</label>
                                    <input class="form-control py-3" id="inputAddress" type="text"
                                        style="ime-mode:active;" placeholder="주소를 입력하세요" />
                                </div>
                            </div>
                            <div class="row" style="margin-top:10px;">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputEmail2">사용자명</label>
                                    <input class="form-control py-3" id="inputEmail2" type="text"
                                        placeholder="사용자명을 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="inputPasswd2">비밀번호</label>
                                    <input class="form-control py-3" id="inputPasswd2" type="text"
                                        placeholder="비밀번호를 입력하세요" />
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <p class="medium mb-3">구분</p>
                                    <select id="userSelect" class="form-control">
                                        <option value="0">일반 사용자</option>
                                        <option value="1">관리자</option>
                                    </select>
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <p class="medium mb-3">관찰 저수지</p>
                                    <div class="bs-multiselect form-control">
                                        <select id="rsvMulti" multiple="multiple">
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-bordered" style="text-align:center;font-size:0.8rem;"
                                        id="idTableUsers" width="auto" cellspacing="0">
                                        <thead>
                                            <tr>
                                                <th>선택</th>
                                                <th>번호</th>
                                                <th>이름</th>
                                                <th>사용자명(Username)</th>
                                                <th>비밀번호(Password)</th>
                                                <th>권한</th>
                                                <th>회사명</th>
                                                <th>전화번호</th>
                                                <th>주소</th>
                                                <th>모니터링 저수지</th>
                                                <th>등록일</th>
                                            </tr>
                                        </thead>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Setting display ---------------------------------------------------------------------->
                    <div id="idSetting" class="container-fluid" style="display:none">
                        <h1 class="mt-4">설정</h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a onclick="moveToDashboard();">대시보드</a></li>
                            <li class="breadcrumb-item active">설정</li>
                        </ol>
                        <div class="card mb-4">
                            <div class="row my-2 mx-2">
                                <div class="form-group col-xl-3 col-md-6">
                                    <label class="medium mb-3" for="idGlobalCommInterval">모니터링주기(분)</label>
                                    <input class="form-control py-3" id="idGlobalCommInterval" type="text"
                                        style="ime-mode:active;" placeholder="숫자로 입력하세요"
                                        onchange="idGlobalCommIntervalChanged()" />

                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <p class="medium mb-3">캡처 이미지 해상도</p>
                                    <select id="imageSizeSelect" class="form-control" onchange="imagesizeChanged()">
                                        <option value="0">저해상도</option>
                                        <option value="1">고해상도</option>
                                    </select>
                                </div>
                                <div class="form-group col-xl-3 col-md-6">
                                    <button class="btn btn-primary btn-sm"
                                        onclick="globalCommIntervalCheckedChanged()">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;변경&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>
                                    <div class="form-check form-switch my-3">
                                        <input class="form-check-input" type="checkbox" id="globalCommIntervalChecked">
                                        <label class="form-check-label" for="globalCommIntervalChecked;">전체 적용</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Modal Test 
    <div class="modal fade" id="myModal5" role="dialog">
        <div class="modal-dialog">
            <div class="modal-content">
                    <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Modal Header</h4>
                    </div>
                    <div class="modal-body">
                    <p>Some text in the modal.</p>
                    </div>
                    <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    </div>
            </div>
          
        </div>
    </div>
    -->
                </main>
                <footer class="py-4 bg-light mt-auto">
                    <div class="container-fluid">
                        <div class="d-flex align-items-center justify-content-between small">
                            <div class="text-muted">Copyright &copy; Saemtle Inc. 2021</div>
                            <div>
                                <a href="#">Privacy Policy</a>
                                &middot;
                                <a href="#">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>

            </div>
        </div>


    </div>

    <!-- The Modal -->
    <div id="myModal" class="modal">
        <span class="myClose">&times;</span>
        <img class="modal-content" id="img01">
        <div id="caption"></div>
    </div>

    <!-- Modal for POP-UP -->
    <div class="modal fade bd-example-modal-lg" id="lPopup" data-backdrop="static" data-keyboard="false" tabindex="-1">
        <div class="modal-dialog modal-sm">
            <div class="modal-content" style="width: 48px">
                <span class="fa fa-spinner fa-spin fa-5x"></span>
            </div>
        </div>
    </div>

    <!--

        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" crossorigin="anonymous"></script>
        -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script src="js/scripts.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
    <!--  
        <script src="assets/demo/chart-area-demo.js"></script>
        <script src="assets/demo/chart-bar-demo.js"></script>
         -->

    <script src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.datatables.net/1.10.20/js/dataTables.bootstrap4.min.js" crossorigin="anonymous"></script>
    <script src="assets/demo/datatables-demo.js"></script>

    <script src="js/mqttext.js"></script>
    <!-- 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.min.js" type="text/javascript"></script>
        -->
    <script src="js/mqttws31.js"></script>


    <script src="js/watertank.js"></script>
    <link href="https://www.jqueryscript.net/css/jquerysctipttop.css" rel="stylesheet" type="text/css">
    <link href="css/bootstrap-slider.css" rel="stylesheet" />
    <script src="js/bootstrap-slider.js"></script>


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-confirm/3.3.2/jquery-confirm.min.js"></script>

    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/js/bootstrap-multiselect.min.js"></script>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.15/css/bootstrap-multiselect.css" />

    <!-- 2023-0808 map 위치 조정 -->
    <script
        src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=279081ae8b9cee222ba9e39f5a812f51&libraries=services"></script>
    <!--
        <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3098ad8643b123e615576c4e9012980c"></script>
        -->
    <script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script type="text/javascript"
        src="https://openapi.map.naver.com/openapi/v3/maps.js?ncpClientId=bip07bvrqh&submodules=geocoder"></script>
    <!-- Moment.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <!-- moment-timezone -->
    <script
        src="https://cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.33/moment-timezone-with-data.min.js"></script>


    <script src="js/index.js"></script>

    <script>
        $(document).ready(function () {
            add_snackbar();     // for toastMessage

            setTimeout(() => {
                if (document.getElementById('rememberPasswordCheck').checked) {
                    // get previous log in information
                    username = localStorage.getItem("username");
                    passwd = localStorage.getItem("passwd");
                    // 저장된 적이 있으면
                    if (username && passwd) {
                        document.getElementById('inputEmailAddress').value = username;
                        document.getElementById('inputPassword').value = passwd;
                    }
                }
            }, 200);

            // When the user clicks on <span> (x), close the modal
            span.onclick = function () {
                modal.style.display = "none";
            }

            // 1213 : address 입력
            $("#inputReservoirAddress").on("keydown", function search(e) {
                if (e.keyCode == 13) {
                    searchMap();
                }
            });
        });

        // login process ...
        function processLogin() {
            _processLogin();
        }

        function processLogout() {
            _processLogout();
        }

        function afterLogin() {
            // 2023-0808
            pageMoveEnable = false;
            setTimeout(() => {
                pageMoveEnable = true;
            }, 2000);

            // 0913
            var welcomeMessage = localStorage.getItem("username") + "님, 환영합니다!";
            toastMessage(welcomeMessage);

            document.getElementById('idBeforeLogin').style.display = 'none';
            $("body").removeClass("bg-primary");        // jjk1
            $("body").addClass("sb-nav-fixed");         // jjk1
            document.getElementById('idAfterLogin').style.display = 'block';

            // default ...
            pageMode = 0;
            movePage();

            setTimeout(() => {
                checkAccessValidation();
            }, 500);


            // 2023-0808
            // _drawMap 내부에서 sense값을 호출함
            /*
            setTimeout(() => {
                askSenseValues(); 
            }, 1000);       // 2000
            */

            // time update ...
            setInterval(() => {
                document.getElementById('dashboard-warning').innerHTML = '주요 경보 &nbsp; (' + koreanNow() + ')';
                // slider update ...
                openSliderUpdate();
            }, 1000);

            // Dashboard
            // draw map : draw map with markers ...
            // 2023-0808
            setTimeout(() => {
                _drawMap();
            }, 1000);


            // click
            document.getElementById('mapTableToggle').onclick = function () {
                mapTableToggle();
            };
            document.getElementById('detailChartToggle').onclick = function () {
                detailChartToggle();
            };
        }

        function moveToSensing() {
            if (!pageMoveEnable) return;

            pageMode = 1;
            movePage();
        }
        function moveToSensing2() {
            if (!pageMoveEnable) return;

            pageMode = 5;
            movePage();
        }
        function moveToEdit() {
            if (!pageMoveEnable) return;

            pageMode = 2;
            movePage();
        }
        function moveToUser() {
            if (!pageMoveEnable) return;

            pageMode = 3;
            movePage();
        }
        function moveToSetting() {
            if (!pageMoveEnable) return;

            pageMode = 4;
            movePage();
        }
        function moveToDashboard() {
            if (!pageMoveEnable) return;

            pageMode = 0;
            movePage();
        }


    </script>




</body>

</html>